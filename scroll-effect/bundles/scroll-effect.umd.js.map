{"version":3,"file":"scroll-effect.umd.js.map","sources":["ng://scroll-effect/lib/scroll-effect.service.ts","ng://scroll-effect/lib/directives/scroll-backdrop.directive.ts","ng://scroll-effect/lib/directives/scroll-title.directive.ts","ng://scroll-effect/lib/animation.ts","ng://scroll-effect/lib/components/scroll-effect.component.ts","ng://scroll-effect/lib/scroll-effect.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScrollEffectService {\n\n  constructor() { }\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollBackdrop]',\n})\nexport class ScrollBackdropDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollBackdropDirective>) { }\n\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollTitle]',\n})\nexport class ScrollTitleDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollTitleDirective>) { }\n\n}\n","import {\r\n  trigger,\r\n  style,\r\n  animate,\r\n  transition,\r\n  state\r\n} from '@angular/animations';\r\n\r\nexport function fadeInOutAnim(duration = '200ms') {\r\n  return trigger('fadeInOut', [\r\n    transition('void => true', [\r\n      style({ opacity: 0 }),\r\n      animate(`${duration} ease`, style({ opacity: 1 }))\r\n    ]),\r\n    transition(':leave', [\r\n      style({ opacity: 1 }),\r\n      animate(`${duration} ease`, style({ opacity: 0 }))\r\n    ])\r\n  ]);\r\n}\r\n\r\nexport function opacity(duration = '200ms') {\r\n  return trigger('opacity', [\r\n    state('false', style({ opacity: 1 })),\r\n    state('true', style({ opacity: 0 })),\r\n\r\n    transition(\r\n      'false => true',\r\n      animate(`${duration} cubic-bezier(.22,.68,.43,1.01)`)\r\n    ),\r\n    transition(\r\n      'true => false',\r\n      animate(`${duration} cubic-bezier(.56,.07,.78,.57)`)\r\n    )\r\n  ]);\r\n}\r\n","import { ActivatedRoute } from '@angular/router';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ElementRef,\n  NgZone,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation,\n  OnDestroy\n} from '@angular/core';\nimport { ScrollBackdropDirective } from '../directives/scroll-backdrop.directive';\nimport { ScrollTitleDirective } from '../directives/scroll-title.directive';\nimport { fadeInOutAnim, opacity } from '../animation';\n// tslint:disable:use-host-property-decorator\n// tslint:disable:component-selector\n// tslint:disable:object-literal-key-quotes\n\nconst SCROLL_BOUND = 250;\nconst MAX_TITLE_Y_POSITION = 150;\nconst MIN_TITLE_Y_POSITION = 50;\n\n@Component({\n  selector: 'scroll-effect',\n  templateUrl: 'scroll-effect.component.html',\n  styleUrls: ['scroll-effect.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  animations: [fadeInOutAnim('1s'), opacity('500ms')],\n  host: {\n    class: 'scroll-effect__container'\n  }\n})\nexport class ScrollEffectComponent implements OnInit, OnDestroy {\n  public showTemplates = true;\n  public isChild = false;\n  private bindScrollEvent = this.onScroll.bind(this);\n\n  @ContentChild(ScrollTitleDirective) titleDirective: ScrollTitleDirective;\n  @ContentChild(ScrollBackdropDirective)\n  backDropDirective: ScrollBackdropDirective;\n\n  @ViewChild('titleElem') titleElem: ElementRef<HTMLDivElement>;\n  @ViewChild('backdropElem') backdropElem: ElementRef<HTMLDivElement>;\n\n  constructor(\n    private zone: NgZone,\n    private cd: ChangeDetectorRef,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.zone.runOutsideAngular(this.initScrollListener.bind(this));\n    this.isChild = this.route.snapshot.data.isChild;\n  }\n\n  ngOnDestroy() {\n    this.zone.runOutsideAngular(this.deleteScrollListener.bind(this));\n  }\n\n  private initScrollListener() {\n    window.addEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private deleteScrollListener() {\n    window.removeEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private onScroll(e: Event) {\n    const scrollY = window.scrollY;\n\n    // OUT OF BOUND -> HIDE ALL\n    if (scrollY > SCROLL_BOUND) {\n      this.showTemplates = false;\n\n      // IN BOUND -> ANIMATE TITLE\n    } else {\n      this.showTemplates = true;\n      this.isChild = true;\n\n      if (this.titleElem) {\n        const factor =\n          (MAX_TITLE_Y_POSITION - MIN_TITLE_Y_POSITION) / SCROLL_BOUND;\n        const newYPosition = factor * scrollY + MIN_TITLE_Y_POSITION;\n\n        const newOpacity = 1 - (1 / SCROLL_BOUND) * scrollY;\n\n        this.titleElem.nativeElement.style.transform = `translate(-50%, ${-newYPosition}%)`;\n        this.titleElem.nativeElement.style.opacity = newOpacity.toString();\n      }\n    }\n    this.cd.detectChanges();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ScrollEffectComponent } from './components/scroll-effect.component';\nimport { ScrollTitleDirective } from './directives/scroll-title.directive';\nimport { ScrollBackdropDirective } from './directives/scroll-backdrop.directive';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ],\n  imports: [\n    CommonModule,\n    BrowserAnimationsModule\n  ],\n  exports: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ]\n})\nexport class ScrollEffectModule { }\n"],"names":["Injectable","Directive","TemplateRef","trigger","transition","style","animate","state","Component","ChangeDetectionStrategy","ViewEncapsulation","NgZone","ChangeDetectorRef","ActivatedRoute","ContentChild","ViewChild","NgModule","CommonModule","BrowserAnimationsModule"],"mappings":";;;;;;;;;;AAAA;QAOE;SAAiB;;oBALlBA,aAAU,SAAC;wBACV,UAAU,EAAE,MAAM;qBACnB;;;;;kCAJD;KAEA;;;;;;;QCSE,iCAAmB,MAA4C;YAA5C,WAAM,GAAN,MAAM,CAAsC;SAAK;;oBALrEC,YAAS,SAAC;wBACT,QAAQ,EAAE,kBAAkB;qBAC7B;;;;;wBAJmBC,cAAW;;;QAS/B,8BAAC;KAPD;;;;;;;QCKE,8BAAmB,MAAyC;YAAzC,WAAM,GAAN,MAAM,CAAmC;SAAK;;oBALlED,YAAS,SAAC;wBACT,QAAQ,EAAE,eAAe;qBAC1B;;;;;wBAJmBC,cAAW;;;QAS/B,2BAAC;KAPD;;;;;;ACNA;;;;AAQA,aAAgB,aAAa,CAAC,QAAkB;QAAlB,yBAAA;YAAA,kBAAkB;;QAC9C,OAAOC,kBAAO,CAAC,WAAW,EAAE;YAC1BC,qBAAU,CAAC,cAAc,EAAE;gBACzBC,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;gBACrBC,kBAAO,CAAI,QAAQ,UAAO,EAAED,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;aACnD,CAAC;YACFD,qBAAU,CAAC,QAAQ,EAAE;gBACnBC,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;gBACrBC,kBAAO,CAAI,QAAQ,UAAO,EAAED,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;aACnD,CAAC;SACH,CAAC,CAAC;IACL,CAAC;;;;;AAED,aAAgB,OAAO,CAAC,QAAkB;QAAlB,yBAAA;YAAA,kBAAkB;;QACxC,OAAOF,kBAAO,CAAC,SAAS,EAAE;YACxBI,gBAAK,CAAC,OAAO,EAAEF,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;YACrCE,gBAAK,CAAC,MAAM,EAAEF,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;YAEpCD,qBAAU,CACR,eAAe,EACfE,kBAAO,CAAI,QAAQ,oCAAiC,CAAC,CACtD;YACDF,qBAAU,CACR,eAAe,EACfE,kBAAO,CAAI,QAAQ,mCAAgC,CAAC,CACrD;SACF,CAAC,CAAC;IACL,CAAC;;;;;;ACnCD;;;;QAoBM,YAAY,GAAG,GAAG;;QAClB,oBAAoB,GAAG,GAAG;;QAC1B,oBAAoB,GAAG,EAAE;AAE/B;QAuBE,+BACU,IAAY,EACZ,EAAqB,EACrB,KAAqB;YAFrB,SAAI,GAAJ,IAAI,CAAQ;YACZ,OAAE,GAAF,EAAE,CAAmB;YACrB,UAAK,GAAL,KAAK,CAAgB;YAdxB,kBAAa,GAAG,IAAI,CAAC;YACrB,YAAO,GAAG,KAAK,CAAC;YACf,oBAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAa/C;;;;QAEJ,wCAAQ;;;YAAR;gBACE,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;aACjD;;;;QAED,2CAAW;;;YAAX;gBACE,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACnE;;;;;QAEO,kDAAkB;;;;YAA1B;gBACE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;aACzD;;;;;QAEO,oDAAoB;;;;YAA5B;gBACE,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;aAC5D;;;;;;QAEO,wCAAQ;;;;;YAAhB,UAAiB,CAAQ;;oBACjB,OAAO,GAAG,MAAM,CAAC,OAAO;;gBAG9B,IAAI,OAAO,GAAG,YAAY,EAAE;oBAC1B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;;iBAG5B;qBAAM;oBACL,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;oBAC1B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBAEpB,IAAI,IAAI,CAAC,SAAS,EAAE;;4BACZ,MAAM,GACV,CAAC,oBAAoB,GAAG,oBAAoB,IAAI,YAAY;;4BACxD,YAAY,GAAG,MAAM,GAAG,OAAO,GAAG,oBAAoB;;4BAEtD,UAAU,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,IAAI,OAAO;wBAEnD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,GAAG,qBAAmB,CAAC,YAAY,OAAI,CAAC;wBACpF,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;qBACpE;iBACF;gBACD,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;aACzB;;oBAtEFE,YAAS,SAAC;wBACT,QAAQ,EAAE,eAAe;wBACzB,8gBAA2C;wBAE3C,eAAe,EAAEC,0BAAuB,CAAC,MAAM;wBAC/C,aAAa,EAAEC,oBAAiB,CAAC,IAAI;wBACrC,UAAU,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;wBACnD,IAAI,EAAE;4BACJ,KAAK,EAAE,0BAA0B;yBAClC;;qBACF;;;;;wBA3BCC,SAAM;wBAJNC,oBAAiB;wBAHVC,qBAAc;;;;qCAwCpBC,eAAY,SAAC,oBAAoB;wCACjCA,eAAY,SAAC,uBAAuB;gCAGpCC,YAAS,SAAC,WAAW;mCACrBA,YAAS,SAAC,cAAc;;QAkD3B,4BAAC;KAvED;;;;;;ACxBA;QAOA;SAgBmC;;oBAhBlCC,WAAQ,SAAC;wBACR,YAAY,EAAE;4BACZ,qBAAqB;4BACrB,oBAAoB;4BACpB,uBAAuB;yBACxB;wBACD,OAAO,EAAE;4BACPC,mBAAY;4BACZC,oCAAuB;yBACxB;wBACD,OAAO,EAAE;4BACP,qBAAqB;4BACrB,oBAAoB;4BACpB,uBAAuB;yBACxB;qBACF;;QACiC,yBAAC;KAhBnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
