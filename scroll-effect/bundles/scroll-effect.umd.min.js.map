{"version":3,"sources":["ng://scroll-effect/lib/scroll-effect.service.ts","ng://scroll-effect/lib/directives/scroll-backdrop.directive.ts","ng://scroll-effect/lib/directives/scroll-title.directive.ts","ng://scroll-effect/lib/animation.ts","ng://scroll-effect/lib/components/scroll-effect.component.ts","ng://scroll-effect/lib/scroll-effect.module.ts"],"names":["ScrollEffectService","Injectable","args","providedIn","Directive","selector","TemplateRef","ScrollBackdropDirective","tmpRef","this","ScrollTitleDirective","fadeInOutAnim","duration","trigger","transition","style","opacity","animate","state","ScrollEffectComponent","prototype","ngOnInit","zone","runOutsideAngular","initScrollListener","bind","isChild","route","snapshot","data","ngOnDestroy","deleteScrollListener","window","addEventListener","bindScrollEvent","removeEventListener","onScroll","e","scrollY","showTemplates","titleElem","newYPosition","newOpacity","nativeElement","transform","toString","cd","detectChanges","Component","template","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","animations","host","class","NgZone","ChangeDetectorRef","ActivatedRoute","ContentChild","ViewChild","ScrollEffectModule","NgModule","declarations","imports","CommonModule","BrowserAnimationsModule","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScrollEffectService {\n\n  constructor() { }\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollBackdrop]',\n})\nexport class ScrollBackdropDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollBackdropDirective>) { }\n\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollTitle]',\n})\nexport class ScrollTitleDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollTitleDirective>) { }\n\n}\n","import {\r\n  trigger,\r\n  style,\r\n  animate,\r\n  transition,\r\n  state\r\n} from '@angular/animations';\r\n\r\nexport function fadeInOutAnim(duration = '200ms') {\r\n  return trigger('fadeInOut', [\r\n    transition('void => true', [\r\n      style({ opacity: 0 }),\r\n      animate(`${duration} ease`, style({ opacity: 1 }))\r\n    ]),\r\n    transition(':leave', [\r\n      style({ opacity: 1 }),\r\n      animate(`${duration} ease`, style({ opacity: 0 }))\r\n    ])\r\n  ]);\r\n}\r\n\r\nexport function opacity(duration = '200ms') {\r\n  return trigger('opacity', [\r\n    state('false', style({ opacity: 1 })),\r\n    state('true', style({ opacity: 0 })),\r\n\r\n    transition(\r\n      'false => true',\r\n      animate(`${duration} cubic-bezier(.22,.68,.43,1.01)`)\r\n    ),\r\n    transition(\r\n      'true => false',\r\n      animate(`${duration} cubic-bezier(.56,.07,.78,.57)`)\r\n    )\r\n  ]);\r\n}\r\n","import { ActivatedRoute } from '@angular/router';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ElementRef,\n  NgZone,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation,\n  OnDestroy\n} from '@angular/core';\nimport { ScrollBackdropDirective } from '../directives/scroll-backdrop.directive';\nimport { ScrollTitleDirective } from '../directives/scroll-title.directive';\nimport { fadeInOutAnim, opacity } from '../animation';\n// tslint:disable:use-host-property-decorator\n// tslint:disable:component-selector\n// tslint:disable:object-literal-key-quotes\n\nconst SCROLL_BOUND = 250;\nconst MAX_TITLE_Y_POSITION = 150;\nconst MIN_TITLE_Y_POSITION = 50;\n\n@Component({\n  selector: 'scroll-effect',\n  templateUrl: 'scroll-effect.component.html',\n  styleUrls: ['scroll-effect.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  animations: [fadeInOutAnim('1s'), opacity('500ms')],\n  host: {\n    class: 'scroll-effect__container'\n  }\n})\nexport class ScrollEffectComponent implements OnInit, OnDestroy {\n  public showTemplates = true;\n  public isChild = false;\n  private bindScrollEvent = this.onScroll.bind(this);\n\n  @ContentChild(ScrollTitleDirective) titleDirective: ScrollTitleDirective;\n  @ContentChild(ScrollBackdropDirective)\n  backDropDirective: ScrollBackdropDirective;\n\n  @ViewChild('titleElem') titleElem: ElementRef<HTMLDivElement>;\n  @ViewChild('backdropElem') backdropElem: ElementRef<HTMLDivElement>;\n\n  constructor(\n    private zone: NgZone,\n    private cd: ChangeDetectorRef,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.zone.runOutsideAngular(this.initScrollListener.bind(this));\n    this.isChild = this.route.snapshot.data.isChild;\n  }\n\n  ngOnDestroy() {\n    this.zone.runOutsideAngular(this.deleteScrollListener.bind(this));\n  }\n\n  private initScrollListener() {\n    window.addEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private deleteScrollListener() {\n    window.removeEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private onScroll(e: Event) {\n    const scrollY = window.scrollY;\n\n    // OUT OF BOUND -> HIDE ALL\n    if (scrollY > SCROLL_BOUND) {\n      this.showTemplates = false;\n\n      // IN BOUND -> ANIMATE TITLE\n    } else {\n      this.showTemplates = true;\n      this.isChild = true;\n\n      if (this.titleElem) {\n        const factor =\n          (MAX_TITLE_Y_POSITION - MIN_TITLE_Y_POSITION) / SCROLL_BOUND;\n        const newYPosition = factor * scrollY + MIN_TITLE_Y_POSITION;\n\n        const newOpacity = 1 - (1 / SCROLL_BOUND) * scrollY;\n\n        this.titleElem.nativeElement.style.transform = `translate(-50%, ${-newYPosition}%)`;\n        this.titleElem.nativeElement.style.opacity = newOpacity.toString();\n      }\n    }\n    this.cd.detectChanges();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ScrollEffectComponent } from './components/scroll-effect.component';\nimport { ScrollTitleDirective } from './directives/scroll-title.directive';\nimport { ScrollBackdropDirective } from './directives/scroll-backdrop.directive';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ],\n  imports: [\n    CommonModule,\n    BrowserAnimationsModule\n  ],\n  exports: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ]\n})\nexport class ScrollEffectModule { }\n"]}