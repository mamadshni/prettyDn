{"version":3,"file":"scroll-effect.js.map","sources":["ng://scroll-effect/lib/scroll-effect.service.ts","ng://scroll-effect/lib/directives/scroll-backdrop.directive.ts","ng://scroll-effect/lib/directives/scroll-title.directive.ts","ng://scroll-effect/lib/animation.ts","ng://scroll-effect/lib/components/scroll-effect.component.ts","ng://scroll-effect/lib/scroll-effect.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ScrollEffectService {\n\n  constructor() { }\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollBackdrop]',\n})\nexport class ScrollBackdropDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollBackdropDirective>) { }\n\n}\n","// tslint:disable:directive-selector\n// tslint:disable:use-host-property-decorator\n// tslint:disable:object-literal-key-quotes\n\nimport { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[scrollTitle]',\n})\nexport class ScrollTitleDirective {\n\n  constructor(public tmpRef: TemplateRef<ScrollTitleDirective>) { }\n\n}\n","import {\r\n  trigger,\r\n  style,\r\n  animate,\r\n  transition,\r\n  state\r\n} from '@angular/animations';\r\n\r\nexport function fadeInOutAnim(duration = '200ms') {\r\n  return trigger('fadeInOut', [\r\n    transition('void => true', [\r\n      style({ opacity: 0 }),\r\n      animate(`${duration} ease`, style({ opacity: 1 }))\r\n    ]),\r\n    transition(':leave', [\r\n      style({ opacity: 1 }),\r\n      animate(`${duration} ease`, style({ opacity: 0 }))\r\n    ])\r\n  ]);\r\n}\r\n\r\nexport function opacity(duration = '200ms') {\r\n  return trigger('opacity', [\r\n    state('false', style({ opacity: 1 })),\r\n    state('true', style({ opacity: 0 })),\r\n\r\n    transition(\r\n      'false => true',\r\n      animate(`${duration} cubic-bezier(.22,.68,.43,1.01)`)\r\n    ),\r\n    transition(\r\n      'true => false',\r\n      animate(`${duration} cubic-bezier(.56,.07,.78,.57)`)\r\n    )\r\n  ]);\r\n}\r\n","import { ActivatedRoute } from '@angular/router';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ElementRef,\n  NgZone,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation,\n  OnDestroy\n} from '@angular/core';\nimport { ScrollBackdropDirective } from '../directives/scroll-backdrop.directive';\nimport { ScrollTitleDirective } from '../directives/scroll-title.directive';\nimport { fadeInOutAnim, opacity } from '../animation';\n// tslint:disable:use-host-property-decorator\n// tslint:disable:component-selector\n// tslint:disable:object-literal-key-quotes\n\nconst SCROLL_BOUND = 250;\nconst MAX_TITLE_Y_POSITION = 150;\nconst MIN_TITLE_Y_POSITION = 50;\n\n@Component({\n  selector: 'scroll-effect',\n  templateUrl: 'scroll-effect.component.html',\n  styleUrls: ['scroll-effect.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  animations: [fadeInOutAnim('1s'), opacity('500ms')],\n  host: {\n    class: 'scroll-effect__container'\n  }\n})\nexport class ScrollEffectComponent implements OnInit, OnDestroy {\n  public showTemplates = true;\n  public isChild = false;\n  private bindScrollEvent = this.onScroll.bind(this);\n\n  @ContentChild(ScrollTitleDirective) titleDirective: ScrollTitleDirective;\n  @ContentChild(ScrollBackdropDirective)\n  backDropDirective: ScrollBackdropDirective;\n\n  @ViewChild('titleElem') titleElem: ElementRef<HTMLDivElement>;\n  @ViewChild('backdropElem') backdropElem: ElementRef<HTMLDivElement>;\n\n  constructor(\n    private zone: NgZone,\n    private cd: ChangeDetectorRef,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.zone.runOutsideAngular(this.initScrollListener.bind(this));\n    this.isChild = this.route.snapshot.data.isChild;\n  }\n\n  ngOnDestroy() {\n    this.zone.runOutsideAngular(this.deleteScrollListener.bind(this));\n  }\n\n  private initScrollListener() {\n    window.addEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private deleteScrollListener() {\n    window.removeEventListener('scroll', this.bindScrollEvent);\n  }\n\n  private onScroll(e: Event) {\n    const scrollY = window.scrollY;\n\n    // OUT OF BOUND -> HIDE ALL\n    if (scrollY > SCROLL_BOUND) {\n      this.showTemplates = false;\n\n      // IN BOUND -> ANIMATE TITLE\n    } else {\n      this.showTemplates = true;\n      this.isChild = true;\n\n      if (this.titleElem) {\n        const factor =\n          (MAX_TITLE_Y_POSITION - MIN_TITLE_Y_POSITION) / SCROLL_BOUND;\n        const newYPosition = factor * scrollY + MIN_TITLE_Y_POSITION;\n\n        const newOpacity = 1 - (1 / SCROLL_BOUND) * scrollY;\n\n        this.titleElem.nativeElement.style.transform = `translate(-50%, ${-newYPosition}%)`;\n        this.titleElem.nativeElement.style.opacity = newOpacity.toString();\n      }\n    }\n    this.cd.detectChanges();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ScrollEffectComponent } from './components/scroll-effect.component';\nimport { ScrollTitleDirective } from './directives/scroll-title.directive';\nimport { ScrollBackdropDirective } from './directives/scroll-backdrop.directive';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ],\n  imports: [\n    CommonModule,\n    BrowserAnimationsModule\n  ],\n  exports: [\n    ScrollEffectComponent,\n    ScrollTitleDirective,\n    ScrollBackdropDirective\n  ]\n})\nexport class ScrollEffectModule { }\n"],"names":[],"mappings":"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"}
